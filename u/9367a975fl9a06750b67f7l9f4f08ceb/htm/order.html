<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders</title>
    <link rel="stylesheet" href="../css/order.css">
</head>
<body class>
    <header>
        <div class="top">
            <a href="#"><img src="../../../img/picture-image-svgrepo-com (1).svg" alt="default"></a>
            <div class="topnav">
                <a href="#" class="active">Orders</a>
                <a href="#">Wishlist</a>
            </div>
            <div id="user-pic" class="link">
                <img src="../../../img/user-profile-circle-svgrepo-com.svg" alt="user-pic">
            </div>
        </div>
    </header>
    <main>
        <section>
            <div>
                <p id="owner">Chris' Stores</p>
            </div>
            <div>DCV Global Nigeria Limited &bullet; 080-000-0000 &bullet; christopher@gmail.com</div>
        </section>
        <section>
            <h2>Orders</h2>
            <div>Welcome to the Orders page. Please pick a date for which order you want to view.</div>
            <div class="btn">
                <div class="jsDateBtn">Choose an order placed on:</div>
                <menu>
                    <li>Wednesday 12, June 1990</li>
                    <li>Friday 02, September 1979</li>
                    <li>Sunday 10, August 1890</li>
                    <li>Tuesday 12, January 1990</li>
                </menu>
            </div>
        </section>
        <section>
            <div>
                <div class="stat_bar">
                    <span class="stat_btn"><i class="check"></i></span>
                    <span>This order ( refID: <b>xyzABC123456</b> ) has not yet been confirmed. Thank you for your patience.</span>
                </div>
                <div>
                    <div class="more_icon link"><svg width="24" height="24"><use href="#more-icon" xlink:href="#more-icon"></use></svg></div>
                    <menu class="btn">
                        <li>Print Invoice</li>
                        <li>Download Invoice</li>
                    </menu>
                </div>
            </div>
            <div class="main">
                <div class="head">
                    <svg width="20" height="20"><use href="#aster" xlink:href="#aster"></use></svg>
                    <span>Invoice</span>
                    <svg width="20" height="20"><use href="#aster" xlink:href="#aster"></use></svg>
                </div>
                <div class="details">
                    <div>
                        <h4>Customer 002</h4>
                        <p>0808-800-9999</p>
                    </div>
                    <div>
                        <h4>Inv#: 123456;7890</h4>
                        <p>Issue Date: 11/11/11</p>
                    </div>
                </div>
                <div class="table">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Description</th>
                                <th>Unit Price</th>
                                <th>Qty</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Item 1 description is to be placed here.</td>
                                <td>1001</td>
                                <td>102</td>
                                <td>10000000</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Item 2 description is to be placed here.</td>
                                <td>1001</td>
                                <td>102</td>
                                <td>10000000</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Item 3 description is to be placed here.</td>
                                <td>1001</td>
                                <td>102</td>
                                <td>10000000</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Item 4 description is to be placed here.</td>
                                <td>1001</td>
                                <td>102</td>
                                <td>10000000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="tfoot">
                    <div>
                        <span>Subtotal</span>
                        <span>12000000</span>
                    </div>
                    <div>
                        <span>Discount</span>
                        <span>0</span>
                    </div>
                    <div id="gtDiv">
                        <span>Grand Total</span>
                        <span>12000000</span>
                    </div>
                    <div>
                        <span>Amount paid</span>
                        <span>1200000</span>
                    </div>
                </div>
                <div id="acctDetails">
                    <p>Account Details</p>
                    <div>
                        <div>
                            <p>Christopher Raphael</p>
                            <p>0123465783</p>
                            <p>GTB</p>
                        </div>
                        <div>
                            <p>Christopher Raphael</p>
                            <p>09876543212</p>
                            <p>OPAY</p>
                        </div>
                    </div>
                </div>
                <footer>
                    <p>Thanks for your patronage.<br><span>Chris' Stores</span></p>
                </footer>
            </div>
        </section>
    </main>
    <div class="svgrepo" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg">
            <symbol id="more-icon"  width="24" height="24" fill="#5F6368">
                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
            </symbol>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <symbol id="aster" fill="#777" height="20" width="20" version="1.1" id="Layer_1" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">
                <g>
                    <path d="M17.7,17l6.2,8.4L21.5,27l-5.5-8.7L10.5,27l-2.3-1.6l6.2-8.4l-9.3-2.4L6,12l9.1,3.2L14.5,5h3L17,15.2l9-3.2l0.8,2.7   L17.7,17z"/>
                </g>
            </symbol>
        </svg>
    </div>
    <script type="module" src="../js/order.js"></script>
    <script>
        let activeMenu;
        window.addEventListener('click', (e) => {
            if (activeMenu) activeMenu.classList.remove('shw');
        }, true);
        const jsDateBtn = document.querySelector('.jsDateBtn');
        jsDateBtn.addEventListener('click', (e) => {
            e.target.classList.toggle('shw');
            activeMenu = e.target;
        });
        const menuItems = document.querySelectorAll('section:nth-child(2) menu > li');
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                jsDateBtn.innerText = item.innerText;
                jsDateBtn.classList.remove('shw');
            });
        });
        const moreIcon = document.querySelector('.more_icon');
        moreIcon.onclick = (e) => {
            e.target.nextElementSibling.classList.toggle('shw');
            activeMenu = e.target.nextElementSibling;
        }
        const invoiceMenu = moreIcon.nextElementSibling.querySelectorAll('li');
        invoiceMenu.forEach((btn, idx) => {
            btn.addEventListener('click', e => {
                if (idx == 0) {
                    window.print();
                } else if (idx == 1) {
                    downloadPDF();
                }
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        window.jsPDF = window.jspdf.jsPDF;
        var docPDF = new jsPDF({
            orientation: 'portrait',
            format: 'a4',
            unit: 'px',
            // putOnlyUsedFonts: true,
        });

        function downloadPDF() {
            const main = document.querySelector('main');
            console.log(main.getBoundingClientRect().width, main.getBoundingClientRect().height)
            docPDF.html(main, {
                callback: function (docPDF) {
                    docPDF.save('mypdf.pdf');
                },
                x: 10,
                y: 10,
                width: main.getBoundingClientRect().width,
                height: main.getBoundingClientRect().height,
            });
        }
    </script>
</body>
</html>